{"name":"Lean.Hygiene","instances":[{"typeNames":["Lean.Unhygienic"],"name":"Lean.Unhygienic.instMonadQuotation","className":"Lean.MonadQuotation"}],"imports":["Lean.Data.Name","Lean.Data.Options","Lean.Data.Format"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L109-L113","name":"Lean.sanitizeSyntax","line":109,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.sanitizeSyntax","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.sanitizeSyntax\"><span class=\"name\">Lean</span>.<span class=\"name\">sanitizeSyntax</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">stx</span> : <a href=\"./Init/Prelude.html#Lean.Syntax\">Syntax</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Control/State.html#StateM\">StateM</a> <a href=\"./Lean/Hygiene.html#Lean.NameSanitizerState\">NameSanitizerState</a> <a href=\"./Init/Prelude.html#Lean.Syntax\">Syntax</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L92-L98","name":"Lean.sanitizeName","line":92,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.sanitizeName","doc":"Erase macro scopes from `userName` and add \"tombstone\" + superscript (or `._hyg`). "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.sanitizeName\"><span class=\"name\">Lean</span>.<span class=\"name\">sanitizeName</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">userName</span> : <a href=\"./Init/Prelude.html#Lean.Name\">Name</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Control/State.html#StateM\">StateM</a> <a href=\"./Lean/Hygiene.html#Lean.NameSanitizerState\">NameSanitizerState</a> <a href=\"./Init/Prelude.html#Lean.Name\">Name</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L81-L81","name":"Lean.NameSanitizerState.userName2Sanitized","line":81,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.NameSanitizerState.userName2Sanitized","doc":"`x._hyg...` ~> `x✝` "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.NameSanitizerState.userName2Sanitized\"><span class=\"name\">Lean</span>.<span class=\"name\">NameSanitizerState</span>.<span class=\"name\">userName2Sanitized</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Hygiene.html#Lean.NameSanitizerState\">NameSanitizerState</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/NameMap.html#Lean.NameMap\">NameMap</a> <a href=\"./Init/Prelude.html#Lean.Name\">Name</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L79-L79","name":"Lean.NameSanitizerState.nameStem2Idx","line":79,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.NameSanitizerState.nameStem2Idx","doc":"`x` ~> 2 if we're already using `x✝`, `x✝¹` "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.NameSanitizerState.nameStem2Idx\"><span class=\"name\">Lean</span>.<span class=\"name\">NameSanitizerState</span>.<span class=\"name\">nameStem2Idx</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Hygiene.html#Lean.NameSanitizerState\">NameSanitizerState</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/NameMap.html#Lean.NameMap\">NameMap</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L77-L77","name":"Lean.NameSanitizerState.options","line":77,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.NameSanitizerState.options","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.NameSanitizerState.options\"><span class=\"name\">Lean</span>.<span class=\"name\">NameSanitizerState</span>.<span class=\"name\">options</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Hygiene.html#Lean.NameSanitizerState\">NameSanitizerState</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L76-L76","name":"Lean.NameSanitizerState.mk","line":76,"kind":"ctor","docLink":"./Lean/Hygiene.html#Lean.NameSanitizerState.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.NameSanitizerState.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">NameSanitizerState</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">options</span> : <a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">nameStem2Idx</span> : <span class=\"fn\"><a href=\"./Lean/Data/NameMap.html#Lean.NameMap\">NameMap</a> <a href=\"./Init/Prelude.html#Nat\">Nat</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">userName2Sanitized</span> : <span class=\"fn\"><a href=\"./Lean/Data/NameMap.html#Lean.NameMap\">NameMap</a> <a href=\"./Init/Prelude.html#Lean.Name\">Name</a></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Hygiene.html#Lean.NameSanitizerState\">NameSanitizerState</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L76-L81","name":"Lean.NameSanitizerState","line":76,"kind":"structure","docLink":"./Lean/Hygiene.html#Lean.NameSanitizerState","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.NameSanitizerState\"><span class=\"name\">Lean</span>.<span class=\"name\">NameSanitizerState</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L74-L74","name":"Lean.getSanitizeNames","line":74,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.getSanitizeNames","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.getSanitizeNames\"><span class=\"name\">Lean</span>.<span class=\"name\">getSanitizeNames</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">o</span> : <a href=\"./Lean/Data/Options.html#Lean.Options\">Options</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Bool\">Bool</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L68-L72","name":"Lean.pp.sanitizeNames","line":68,"kind":"opaque","docLink":"./Lean/Hygiene.html#Lean.pp.sanitizeNames","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">opaque</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.pp.sanitizeNames\"><span class=\"name\">Lean</span>.<span class=\"name\">pp</span>.<span class=\"name\">sanitizeNames</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Data/Options.html#Lean.Option\">Lean.Option</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L43-L44","name":"Lean.Unhygienic.run","line":43,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.Unhygienic.run","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.Unhygienic.run\"><span class=\"name\">Lean</span>.<span class=\"name\">Unhygienic</span>.<span class=\"name\">run</span></a></span><span class=\"impl_arg\"><span class=\"decl_args\">\n<span class=\"fn\">{<span class=\"fn\">α</span> : <a href=\"./foundational_types.html\">Type</a>}</span></span>\n</span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">x</span> : <span class=\"fn\"><a href=\"./Lean/Hygiene.html#Lean.Unhygienic\">Unhygienic</a> <span class=\"fn\">α</span></span>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\">α</span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L34-L41","name":"Lean.Unhygienic.instMonadQuotation","line":34,"kind":"instance","docLink":"./Lean/Hygiene.html#Lean.Unhygienic.instMonadQuotation","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">instance</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.Unhygienic.instMonadQuotation\"><span class=\"name\">Lean</span>.<span class=\"name\">Unhygienic</span>.<span class=\"name\">instMonadQuotation</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Lean.MonadQuotation\">MonadQuotation</a> <a href=\"./Lean/Hygiene.html#Lean.Unhygienic\">Unhygienic</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L18-L32","name":"Lean.Unhygienic","line":18,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.Unhygienic","doc":"Simplistic MonadQuotation that does not guarantee globally fresh names, that\nis, between different runs of this or other MonadQuotation implementations.\nIt is only safe if the syntax quotations do not introduce bindings around\nantiquotations, and if references to globals are prefixed with `_root_.`\n(which is not allowed to refer to a local variable)\n`Unhygienic` can also be seen as a model implementation of `MonadQuotation`\n(since it is completely hygienic as long as it is \"run\" only once and can\nassume that there are no other implementations in use, as is the case for the\nelaboration monads that carry their macro scope state through the entire\nprocessing of a file). It uses the state monad to query and allocate the\nnext macro scope, and uses the reader monad to store the stack of scopes\ncorresponding to `withFreshMacroScope` calls.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.Unhygienic\"><span class=\"name\">Lean</span>.<span class=\"name\">Unhygienic</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">α</span> : <a href=\"./foundational_types.html\">Type</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L16-L16","name":"Lean.Unhygienic.Context.scope","line":16,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.Unhygienic.Context.scope","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.Unhygienic.Context.scope\"><span class=\"name\">Lean</span>.<span class=\"name\">Unhygienic</span>.<span class=\"name\">Context</span>.<span class=\"name\">scope</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Hygiene.html#Lean.Unhygienic.Context\">Context</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Lean.MacroScope\">MacroScope</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L15-L15","name":"Lean.Unhygienic.Context.ref","line":15,"kind":"def","docLink":"./Lean/Hygiene.html#Lean.Unhygienic.Context.ref","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">abbrev</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.Unhygienic.Context.ref\"><span class=\"name\">Lean</span>.<span class=\"name\">Unhygienic</span>.<span class=\"name\">Context</span>.<span class=\"name\">ref</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">self</span> : <a href=\"./Lean/Hygiene.html#Lean.Unhygienic.Context\">Context</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Lean.Syntax\">Syntax</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L14-L14","name":"Lean.Unhygienic.Context.mk","line":14,"kind":"ctor","docLink":"./Lean/Hygiene.html#Lean.Unhygienic.Context.mk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.Unhygienic.Context.mk\"><span class=\"name\">Lean</span>.<span class=\"name\">Unhygienic</span>.<span class=\"name\">Context</span>.<span class=\"name\">mk</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ref</span> : <a href=\"./Init/Prelude.html#Lean.Syntax\">Syntax</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">scope</span> : <a href=\"./Init/Prelude.html#Lean.MacroScope\">MacroScope</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Hygiene.html#Lean.Unhygienic.Context\">Context</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Hygiene.lean#L14-L16","name":"Lean.Unhygienic.Context","line":14,"kind":"structure","docLink":"./Lean/Hygiene.html#Lean.Unhygienic.Context","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">structure</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Hygiene.html#Lean.Unhygienic.Context\"><span class=\"name\">Lean</span>.<span class=\"name\">Unhygienic</span>.<span class=\"name\">Context</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"}]}