{"name":"Lean.Server.CodeActions.Provider","instances":[],"imports":["Lean.Elab.BuiltinTerm","Lean.Elab.BuiltinNotation","Lean.Server.InfoUtils","Lean.Server.CodeActions.Attr"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L165-L186","name":"Lean.CodeAction.cmdCodeActionProvider","line":165,"kind":"def","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.cmdCodeActionProvider","doc":"A code action which calls all `@[command_code_action]` code actions on each command.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.cmdCodeActionProvider\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">cmdCodeActionProvider</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/CodeActions/Basic.html#Lean.Server.CodeActionProvider\">Server.CodeActionProvider</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L141-L163","name":"Lean.CodeAction.findInfoTree?","line":141,"kind":"opaque","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findInfoTree?","doc":"Returns the info tree corresponding to a syntax, using `kind` and `range` for identification.\n(This is not foolproof, but it is a fairly accurate proxy for `Syntax` equality and a lot cheaper\nthan deep comparison.)\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findInfoTree?\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">findInfoTree?</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">kind</span> : <a href=\"./Init/Prelude.html#Lean.SyntaxNodeKind\">SyntaxNodeKind</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">tgtRange</span> : <a href=\"./Lean/Syntax.html#String.Range\">String.Range</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">ctx?</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.ContextInfo\">Elab.ContextInfo</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">t</span> : <a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree\">Elab.InfoTree</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">f</span> : <span class=\"fn\"><a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.ContextInfo\">Elab.ContextInfo</a> → <span class=\"fn\"><a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.Info\">Elab.Info</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">canonicalOnly</span> : <a href=\"./Init/Prelude.html#Bool\">Bool</a> := <a href=\"./Init/Prelude.html#Bool.false\">false</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> (<a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.ContextInfo\">Elab.ContextInfo</a> <a href=\"./Init/Prelude.html#Prod\">×</a> <a href=\"./Lean/Elab/InfoTree/Types.html#Lean.Elab.InfoTree\">Elab.InfoTree</a>)</span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L99-L139","name":"Lean.CodeAction.findTactic?.go","line":99,"kind":"opaque","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findTactic?.go","doc":"Main recursion for `findTactic?`. This takes a `stack` context and a root syntax `stx`,\nand returns the best `FindTacticResult` it can find. It returns `none` (abort) if two or more\nresults are found, and `some none` (none yet) if no results are found. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">partial def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findTactic?.go\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">findTactic?</span>.<span class=\"name\">go</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">preferred</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">range</span> : <a href=\"./Lean/Syntax.html#String.Range\">String.Range</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">stack</span> : <a href=\"./Lean/Syntax.html#Lean.Syntax.Stack\">Syntax.Stack</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">stx</span> : <a href=\"./Init/Prelude.html#Lean.Syntax\">Syntax</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">prev?</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a></span> := <a href=\"./Init/Prelude.html#Option.none\">none</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult\">FindTacticResult</a>)</span></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L92-L94","name":"Lean.CodeAction.findTactic?.merge","line":92,"kind":"def","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findTactic?.merge","doc":"Merges the results of two `FindTacticResult`s. This just prefers the second (inner) one,\nunless the inner tactic is a dispreferred tactic sequence and the outer one is preferred.\nThis is used to implement whitespace-sensitive selection of tactic sequences. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findTactic?.merge\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">findTactic?</span>.<span class=\"name\">merge</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">r₁</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult\">FindTacticResult</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">r₂</span> : <a href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult\">FindTacticResult</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult\">FindTacticResult</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L82-L87","name":"Lean.CodeAction.findTactic?.visit","line":82,"kind":"def","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findTactic?.visit","doc":"Returns `none` if we should not visit this syntax at all, and `some false` if we only\nwant to visit it in \"extended\" mode (where we include trailing characters). "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findTactic?.visit\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">findTactic?</span>.<span class=\"name\">visit</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">range</span> : <a href=\"./Lean/Syntax.html#String.Range\">String.Range</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">stx</span> : <a href=\"./Init/Prelude.html#Lean.Syntax\">Syntax</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">prev?</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a></span> := <a href=\"./Init/Prelude.html#Option.none\">none</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Init/Prelude.html#Bool\">Bool</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L55-L139","name":"Lean.CodeAction.findTactic?","line":55,"kind":"def","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findTactic?","doc":"Find the syntax on which to trigger tactic code actions.\nThis is a pure syntax pass, without regard to elaboration information.\n\n* `preferred : String.Pos → Bool`: used to select \"preferred `tacticSeq`s\" based on the cursor\n  column, when the cursor selection would otherwise be ambiguous. For example, in:\n  ```\n  · foo\n    · bar\n      baz\n    |\n  ```\n  where the cursor is at the `|`, we select the `tacticSeq` starting with `foo`, while if the\n  cursor was indented to align with `baz` then we would select the `bar; baz` sequence instead.\n\n* `range`: the cursor selection. We do not do much with range selections; if a range selection\n  covers more than one tactic then we abort.\n\n* `root`: the root syntax to process\n\nThe return value is either a selected tactic, or a selected point in a tactic sequence.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.findTactic?\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">findTactic?</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">preferred</span> : <span class=\"fn\"><a href=\"./Init/Prelude.html#String.Pos\">String.Pos</a> → <a href=\"./Init/Prelude.html#Bool\">Bool</a></span>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">range</span> : <a href=\"./Lean/Syntax.html#String.Range\">String.Range</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">root</span> : <a href=\"./Init/Prelude.html#Lean.Syntax\">Syntax</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/Prelude.html#Option\">Option</a> <a href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult\">FindTacticResult</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L50-L53","name":"Lean.CodeAction.FindTacticResult.tacticSeq","line":50,"kind":"ctor","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult.tacticSeq","doc":"The cursor is between tactics, and the nearest enclosing range is a tactic sequence.\nCode actions will insert tactics at index `insertIdx` into the syntax\n(which is a nullNode of `tactic;*` inside a `tacticSeqBracketed` or `tacticSeq1Indented`). "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult.tacticSeq\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">FindTacticResult</span>.<span class=\"name\">tacticSeq</span></a></span><span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">preferred</span> : <a href=\"./Init/Prelude.html#Bool\">Bool</a>)</span></span>\n<span class=\"decl_args\">\n<span class=\"fn\">(<span class=\"fn\">insertIdx</span> : <a href=\"./Init/Prelude.html#Nat\">Nat</a>)</span></span>\n<span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Syntax.html#Lean.Syntax.Stack\">Syntax.Stack</a> → <a href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult\">FindTacticResult</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L48-L49","name":"Lean.CodeAction.FindTacticResult.tactic","line":48,"kind":"ctor","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult.tactic","doc":"The nearest enclosing tactic is a tactic, with the given syntax stack. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">constructor</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult.tactic\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">FindTacticResult</span>.<span class=\"name\">tactic</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Lean/Syntax.html#Lean.Syntax.Stack\">Syntax.Stack</a> → <a href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult\">FindTacticResult</a></span></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L43-L53","name":"Lean.CodeAction.FindTacticResult","line":43,"kind":"inductive","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult","doc":"The return value of `findTactic?`.\nThis is the syntax for which code actions will be triggered.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">inductive</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.FindTacticResult\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">FindTacticResult</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./foundational_types.html\">Type</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/CodeActions/Provider.lean#L25-L41","name":"Lean.CodeAction.holeCodeActionProvider","line":25,"kind":"def","docLink":"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.holeCodeActionProvider","doc":"A code action which calls all `@[hole_code_action]` code actions on each hole\n(`?_`, `_`, or `sorry`).\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/CodeActions/Provider.html#Lean.CodeAction.holeCodeActionProvider\"><span class=\"name\">Lean</span>.<span class=\"name\">CodeAction</span>.<span class=\"name\">holeCodeActionProvider</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Lean/Server/CodeActions/Basic.html#Lean.Server.CodeActionProvider\">Server.CodeActionProvider</a></div></div>"}]}