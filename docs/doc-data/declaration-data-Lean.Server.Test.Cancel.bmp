{"name":"Lean.Server.Test.Cancel","instances":[],"imports":["Lean.Elab.Tactic.Basic"],"declarations":[{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/Test/Cancel.lean#L148-L153","name":"Lean.Server.Test.Cancel.tacticWait_for_main_cancel_once_async","line":148,"kind":"def","docLink":"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_main_cancel_once_async","doc":"Like `wait_for_cancel_once_async` but waits for the main thread's cancellation token. This is useful\nto test main thread cancellation in non-incremental contexts because we otherwise wouldn't be able\nto send out the \"blocked\" message from there.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_main_cancel_once_async\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">Test</span>.<span class=\"name\">Cancel</span>.<span class=\"name\">tacticWait_for_main_cancel_once_async</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Lean.ParserDescr\">ParserDescr</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/Test/Cancel.lean#L116-L120","name":"Lean.Server.Test.Cancel.tacticWait_for_cancel_once_async","line":116,"kind":"def","docLink":"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_cancel_once_async","doc":"Like `wait_for_cancel_once` but does the waiting in a separate task and waits for its\ncancellation.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_cancel_once_async\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">Test</span>.<span class=\"name\">Cancel</span>.<span class=\"name\">tacticWait_for_cancel_once_async</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Lean.ParserDescr\">ParserDescr</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/Test/Cancel.lean#L111-L114","name":"Lean.Server.Test.Cancel.tacticUnblock","line":111,"kind":"def","docLink":"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticUnblock","doc":"Unblocks a `wait_for_unblock*` task. "},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticUnblock\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">Test</span>.<span class=\"name\">Cancel</span>.<span class=\"name\">tacticUnblock</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Lean.ParserDescr\">ParserDescr</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/Test/Cancel.lean#L89-L109","name":"Lean.Server.Test.Cancel.tacticWait_for_unblock_async","line":89,"kind":"def","docLink":"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_unblock_async","doc":"Spawns a `logSnapshotTask` that waits for `unblock` to be called, which is expected to happen in a\nsubsequent document version that does not invalidate this tactic. Complains if cancellation token\nwas set before unblocking, i.e. if the tactic was invalidated after all.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_unblock_async\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">Test</span>.<span class=\"name\">Cancel</span>.<span class=\"name\">tacticWait_for_unblock_async</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Lean.ParserDescr\">ParserDescr</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/Test/Cancel.lean#L59-L64","name":"Lean.Server.Test.Cancel.tacticWait_for_unblock","line":59,"kind":"def","docLink":"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_unblock","doc":"Waits for `unblock` to be called, which is expected to happen in a subsequent document version that\ndoes not invalidate this tactic. Complains if cancellation token was set before unblocking, i.e. if\nthe tactic was invalidated after all.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_unblock\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">Test</span>.<span class=\"name\">Cancel</span>.<span class=\"name\">tacticWait_for_unblock</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Lean.ParserDescr\">ParserDescr</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/Test/Cancel.lean#L57-L57","name":"Lean.Server.Test.Cancel.unblockedCancelTk","line":57,"kind":"opaque","docLink":"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.unblockedCancelTk","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">opaque</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.unblockedCancelTk\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">Test</span>.<span class=\"name\">Cancel</span>.<span class=\"name\">unblockedCancelTk</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/System/IO.html#IO.CancelToken\">IO.CancelToken</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/Test/Cancel.lean#L19-L25","name":"Lean.Server.Test.Cancel.tacticWait_for_cancel_once","line":19,"kind":"def","docLink":"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_cancel_once","doc":"On first invocation, sends a diagnostics \"blocked\", blocks until cancelled, and then eprints\n\"cancelled!\"; further invocations complete when this wait is done but do not wait for their own\ncancellation. Thus all document versions should complete strictly after the printing has completed\nand we avoid terminating the server too early to see the message.\n"},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">def</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.tacticWait_for_cancel_once\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">Test</span>.<span class=\"name\">Cancel</span>.<span class=\"name\">tacticWait_for_cancel_once</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><a href=\"./Init/Prelude.html#Lean.ParserDescr\">ParserDescr</a></div></div>"},{"info":{"sourceLink":"https://github.com/leanprover/lean4/blob/81b85203c90439fb7d7e0cec32130d62d8cb7a2e/src/Lean/Server/Test/Cancel.lean#L17-L17","name":"Lean.Server.Test.Cancel.onceRef","line":17,"kind":"opaque","docLink":"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.onceRef","doc":""},"header":"<div class=\"decl_header\"><span class=\"decl_kind\">opaque</span>\n<span class=\"decl_name\"><a class=\"break_within\" href=\"./Lean/Server/Test/Cancel.html#Lean.Server.Test.Cancel.onceRef\"><span class=\"name\">Lean</span>.<span class=\"name\">Server</span>.<span class=\"name\">Test</span>.<span class=\"name\">Cancel</span>.<span class=\"name\">onceRef</span></a></span><span class=\"decl_args\"> :</span><div class=\"decl_type\"><span class=\"fn\"><a href=\"./Init/System/IO.html#IO.Ref\">IO.Ref</a> <span class=\"fn\">(<a href=\"./Init/Prelude.html#Option\">Option</a> <span class=\"fn\">(<a href=\"./Init/Core.html#Task\">Task</a> <a href=\"./Init/Prelude.html#Unit\">Unit</a>)</span>)</span></span></div></div>"}]}